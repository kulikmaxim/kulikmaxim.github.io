!function t(e,n,i){function s(r,o){if(!n[r]){if(!e[r]){var u="function"==typeof require&&require;if(!o&&u)return u(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[r]={exports:{}};e[r][0].call(h.exports,function(t){var n=e[r][1][t];return s(n||t)},h,h.exports,t,e,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var s=i(t("./utils/router")),a=i(t("./routes/routes"));new s.default(a.default);document.getElementById("links").addEventListener("click",function(t){if(t.target.matches("a")){t.preventDefault();var e=t.target.getAttribute("href");window.location.hash=e}})},{"./routes/routes":6,"./utils/router":9}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.eventBus=i,this.state=n,this.init(),this.render()}return i(t,[{key:"init",value:function(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.getElementById(this.options.container).appendChild(this.canvas),this.subscribeToClick(),this.subscribeToTick()}},{key:"render",value:function(){this.changeCanvasSizeAccordingState(),this.context.clearRect(0,0,this.options.width,this.options.height),this.context.beginPath();for(var t=0;t<this.state.length;t++)for(var e=0;e<this.state[t].length;e++)if(this.state[t][e]){var n=e*this.options.squareSize,i=t*this.options.squareSize;this.context.moveTo(n,i),this.context.rect(n,i,this.options.squareSize,this.options.squareSize)}this.context.stroke(),this.context.fill()}},{key:"changeCanvasSizeAccordingState",value:function(){this.canvas.width=this.state[0].length*this.options.squareSize,this.canvas.height=this.state.length*this.options.squareSize}},{key:"subscribeToClick",value:function(){var t=this;this.canvas.addEventListener("click",function(e){return t.eventBus.trigger("view:cellChanged",t.getCellByCoordinates(e.offsetX,e.offsetY))})}},{key:"getCellByCoordinates",value:function(t,e){return{row:Math.floor(e/this.options.squareSize),column:Math.floor(t/this.options.squareSize)}}},{key:"subscribeToTick",value:function(){var t=this;this.eventBus.on("stateManager:stateChanged",function(e){t.state=e,t.render()})}}]),t}();n.default=s},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){return t&&t.__esModule?t:{default:t}}(t("../utils/gameLife")),a=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.eventBus=n,this.states=[],this.init(),this.subscribeToChangeCell()}return i(t,[{key:"init",value:function(){this.container=document.getElementById(this.options.container),this.render(),this.initGameState(),this.subscribeToClick(),this.subscribeToChangeSpeed(),this.subscribeToChangeSize()}},{key:"initGameState",value:function(){if(!this.states.length){for(var t=[],e=0;e<this.options.height;e++)t.push(Array(this.options.width).fill(!1));this.gameLife=new s.default(t),this.states.push(t),this.stateIndex=this.states.length-1}}},{key:"start",value:function(){var t=this;this.stateIndex!==this.states.length-1&&(this.gameLife.state=this.states[this.stateIndex],this.states.length=this.stateIndex+1),this.timer=setTimeout(function(){t.gameLife.tick(),t.states.push(t.gameLife.state),t.eventBus.trigger("stateManager:stateChanged",t.gameLife.state),t.stateIndex=t.states.length-1,t.start()},this.options.speed.current)}},{key:"stop",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){var t=this.options.speed,e='<input type="button" value="<<" id="previous">\n        <input type="button" id="play" value="|>">\n        <input type="button" value=">>" id="next">\n        <br><br>\n        Width: <input type="number" data-size="width" value="'+this.options.width+'" step="1" min="0" max="30">\n        Height: <input type="number" data-size="height" value="'+this.options.height+'" step="1" min="0" max="20">\n        <br><br>\n        Speed: <input type="range" id="speed" min="'+t.min+'" max="'+t.max+'" step="'+t.step+'" value="'+t.current+'" list="speed-values">';this.container.innerHTML=e}},{key:"subscribeToClick",value:function(){var t=this;this.container.addEventListener("click",function(e){if(e.target.matches("#play")&&(t.timer?(t.stop(),e.target.value="|>",document.getElementById("previous").disabled=!1,document.getElementById("next").disabled=!1):(t.start(),e.target.value="||",document.getElementById("previous").disabled=!0,document.getElementById("next").disabled=!0)),e.target.matches("#previous")){var n=t.stateIndex>0?--t.stateIndex:t.stateIndex;t.eventBus.trigger("stateManager:stateChanged",t.states[n])}if(e.target.matches("#next")){var i=t.stateIndex<t.states.length-1?++t.stateIndex:t.stateIndex;t.eventBus.trigger("stateManager:stateChanged",t.states[i])}})}},{key:"subscribeToChangeSpeed",value:function(){var t=this;this.container.addEventListener("change",function(e){e.target.matches("input[type=range]")&&(t.options.speed.current=e.target.value)})}},{key:"subscribeToChangeSize",value:function(){var t=this;this.container.addEventListener("input",function(e){e.target.hasAttribute("data-size")&&("height"===e.target.getAttribute("data-size")?t.options.height=+e.target.value:t.options.width=+e.target.value,t.changeStateSize())},!0)}},{key:"changeStateSize",value:function(){var t=this.states[this.stateIndex];t.length=this.options.height;for(var e=0;e<this.options.height;e++)t[e]?t[e].length=this.options.width:t[e]=Array(this.options.width).fill(!1);this.eventBus.trigger("stateManager:stateChanged",t)}},{key:"subscribeToChangeCell",value:function(){var t=this;this.eventBus.on("view:cellChanged",function(e){var n=e.row,i=e.column;t.gameLife.state=t.states[t.stateIndex],t.gameLife.state[n][i]=!t.gameLife.state[n][i],t.eventBus.trigger("stateManager:stateChanged",t.gameLife.state)})}},{key:"currentState",get:function(){return this.states[this.stateIndex]}}]),t}();n.default=a},{"../utils/gameLife":8}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.eventBus=i,this.state=n,this.init(),this.render()}return i(t,[{key:"init",value:function(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),document.getElementById(this.options.container).appendChild(this.svg),this.subscribeToClick(),this.subscribeToTick()}},{key:"render",value:function(){this.changeSvgSizeAccordingState();var t=this.options;this.svg.textContent="";for(var e="",n=0;n<this.state.length;n++)for(var i=0;i<this.state[n].length;i++)if(this.state[n][i]){e+="<rect x='"+i*t.squareSize+"' y='"+n*t.squareSize+"' width='"+t.squareSize+"' height='"+t.squareSize+"' class='svg-square'/>"}this.svg.innerHTML+=e}},{key:"getCellByCoordinates",value:function(t,e){return{row:Math.floor(e/this.options.squareSize),column:Math.floor(t/this.options.squareSize)}}},{key:"changeSvgSizeAccordingState",value:function(){this.svg.setAttribute("width",this.state[0].length*this.options.squareSize),this.svg.setAttribute("height",this.state.length*this.options.squareSize)}},{key:"subscribeToClick",value:function(){var t=this;this.svg.addEventListener("click",function(e){return t.eventBus.trigger("view:cellChanged",t.getCellByCoordinates(e.offsetX,e.offsetY))})}},{key:"subscribeToTick",value:function(){var t=this;this.eventBus.on("stateManager:stateChanged",function(e){t.state=e,t.render()})}}]),t}();n.default=s},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.eventBus=i,this.state=n,this.init(),this.render()}return i(t,[{key:"init",value:function(){this.container=document.createElement("pre"),this.container.className="textView",document.getElementById(this.options.container).appendChild(this.container),this.subscribeToTick(),this.subscribeToClick()}},{key:"render",value:function(){for(var t="",e=0;e<this.state.length;e++){for(var n=0;n<this.state[e].length;n++)t+=this.state[e][n]?"X":" ";t+="\n"}this.container.innerHTML=t}},{key:"subscribeToClick",value:function(){var t=this;this.container.addEventListener("click",function(e){var n=e.target.clientWidth,i=e.target.clientHeight,s=n/t.state[0].length,a=i/t.state.length,r=e.offsetX,o=e.offsetY;t.eventBus.trigger("view:cellChanged",{row:Math.floor(o/a),column:Math.floor(r/s)})})}},{key:"subscribeToTick",value:function(){var t=this;this.eventBus.on("stateManager:stateChanged",function(e){t.state=e,t.render()})}}]),t}();n.default=s},{}],6:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(){h||l||(d.innerHTML=f,h=new a.default,l=new r.default({container:"stateManager",width:20,height:10,speed:{min:1e3,max:5e3,current:2e3,step:1e3}},h))}Object.defineProperty(n,"__esModule",{value:!0});var a=i(t("../utils/eventBus")),r=i(t("../components/stateManager")),o=i(t("../components/textView")),u=i(t("../components/canvasView")),c=i(t("../components/svgView")),h=void 0,l=void 0,f='<div id="view" class="view"></div><hr><div id="stateManager" class="stateManager"></div>',d=document.getElementById("content"),v=[{name:"textView",match:/(^$|#text)/,onEnter:function(){s();new o.default({container:"view"},l.currentState,h)},onLeave:function(){return document.getElementById("view").innerHTML=""}},{name:"canvasView",match:"#canvas",onEnter:function(){s();new u.default({container:"view",squareSize:30},l.currentState,h)},onLeave:function(){return document.getElementById("view").innerHTML=""}},{name:"svgView",match:"#svg",onEnter:function(){s();new c.default({container:"view",squareSize:30},l.currentState,h)},onLeave:function(){return document.getElementById("view").innerHTML=""}},{name:"about",match:"#about",onBeforeEnter:function(){return l.stop()},onEnter:function(){return d.innerHTML="<div>О сайте</div>"},onLeave:function(){d.innerHTML=f,l&&l.init()}}];n.default=v},{"../components/canvasView":2,"../components/stateManager":3,"../components/svgView":4,"../components/textView":5,"../utils/eventBus":7}],7:[function(t,e,n){"use strict";function i(){this[s]={}}Object.defineProperty(n,"__esModule",{value:!0});var s=Symbol("listeners");i.prototype.on=function(t,e){this[s][t]=this[s][t]||[],this[s][t].push(e)},i.prototype.off=function(t,e){e?this[s][t]=(this[s][t]||[]).filter(function(t){return t!==e}):this[s][t].splice(0,this[s][t].length)},i.prototype.trigger=function(t){if(this[s][t]){var e=Array.prototype.slice.call(arguments,1);this[s][t].forEach(function(t){return t.apply(null,e)})}},i.prototype.once=function(t,e){var n=this;this.on(t,function i(){n.off(t,i),e.apply(null,arguments)})},n.default=i},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=e}return i(t,[{key:"tick",value:function(){var t=this,e=this.state.map(function(e,n){return e.map(function(e,i){return t.isAlive(n,i)})});this.state=e}},{key:"isAlive",value:function(t,e){for(var n=0,i=t-1;i<=t+1;i++)for(var s=e-1;s<=e+1;s++)i===t&&s===e||this.state[i]&&this.state[i][s]&&n++;return this.state[t][e]?2===n||3===n:3===n}}]),t}();n.default=s},{}],9:[function(t,e,n){"use strict";function i(t){this.routes=t||[],this.init()}Object.defineProperty(n,"__esModule",{value:!0}),i.prototype.init=function(){var t=this;window.addEventListener("hashchange",function(){return t.handleUrl(window.location.hash)}),this.handleUrl(window.location.hash)},i.prototype.handleUrl=function(t){var e=this,n=this.findRoute(t),i=this.getUrlParams(n,t);return Promise.resolve().then(function(){return e.currentRoute&&e.currentRoute.onLeave&&e.currentRoute.onLeave(e.currentRouteParams)}).then(function(){return n&&n.onBeforeEnter&&n.onBeforeEnter(i)}).then(function(){return n&&n.onEnter&&n.onEnter(i)}).then(function(){e.currentRoute=n,e.currentRouteParams=i})},i.prototype.findRoute=function(t){return this.routes.find(function(e){return"string"==typeof e.match?e.match===t:e.match instanceof RegExp?e.match.test(t):"function"==typeof e.match?e.match(t):void 0})},i.prototype.getUrlParams=function(t,e){if(t)return t.match instanceof RegExp?e.match(t.match):"function"==typeof t.match?t.match(e):void 0},n.default=i},{}]},{},[1]);